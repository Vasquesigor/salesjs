{"version":3,"sources":["node_modules/browser-pack/_prelude.js","lib/api/tooling.js","jsforce-api-tooling.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","jsforce","modules","api","Tooling","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","_","Cache","conn","_conn","_logger","forEach","method","constructor","prototype","cache","cacheOptions","key","type","describe$","makeCacheable","describe","makeResponseCacheable","describeSObject$","describeSObject","describeGlobal$","describeGlobal","initialize","sobjects","clear","get","removeAllListeners","on","bind","res","result","map","so","name","sobject","_baseUrl","_supports","feature","apply","arguments","request","executeAnonymous","body","callback","url","encodeURIComponent","thenCall","runTestsAsynchronous","classids","requestPost","join","undefined","runTestsSynchronous","classnames","completions","isString","tooling"],"mappings":"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","file":"jsforce-api-tooling.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/**\n * @file Manages Tooling APIs\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\n */\n\n'use strict';\n\nvar jsforce = window.jsforce.require('./core'),\n    _     = window.jsforce.require('lodash/core'),\n    Cache = window.jsforce.require('./cache');\n\n/**\n * API class for Tooling API call\n *\n * @class\n * @param {Connection} conn - Connection\n */\nvar Tooling = function(conn) {\n  this._conn = conn;\n  this._logger = conn._logger;\n  var delegates = [\n    \"query\",\n    \"queryMore\",\n    \"_toRecordResult\",\n    \"create\",\n    \"_createSingle\",\n    \"_createParallel\",\n    \"_createMany\",\n    \"insert\",\n    \"retrieve\",\n    \"_retrieveSingle\",\n    \"_retrieveParallel\",\n    \"_retrieveMany\",\n    \"update\",\n    \"_updateSingle\",\n    \"_updateParallel\",\n    \"_updateMany\",\n    \"upsert\",\n    \"del\",\n    \"delete\",\n    \"destroy\",\n    \"_destroySingle\",\n    \"_destroyParallel\",\n    \"_destroyMany\",\n    \"describe\",\n    \"describeGlobal\",\n    \"sobject\"\n  ];\n  delegates.forEach(function(method) {\n    this[method] = conn.constructor.prototype[method];\n  }, this);\n\n  this.cache = new Cache();\n\n  var cacheOptions = {\n    key: function(type) { return type ? \"describe.\" + type : \"describe\"; }\n  };\n  this.describe$ = this.cache.makeCacheable(this.describe, this, cacheOptions);\n  this.describe = this.cache.makeResponseCacheable(this.describe, this, cacheOptions);\n  this.describeSObject$ = this.describe$;\n  this.describeSObject = this.describe;\n\n  cacheOptions = { key: 'describeGlobal' };\n  this.describeGlobal$ = this.cache.makeCacheable(this.describeGlobal, this, cacheOptions);\n  this.describeGlobal = this.cache.makeResponseCacheable(this.describeGlobal, this, cacheOptions);\n\n  this.initialize();\n};\n\n/**\n * Initialize tooling API\n * @protected\n */\nTooling.prototype.initialize = function() {\n  this.sobjects = {};\n  this.cache.clear();\n  this.cache.get('describeGlobal').removeAllListeners('value');\n  this.cache.get('describeGlobal').on('value', _.bind(function(res) {\n    if (res.result) {\n      var types = _.map(res.result.sobjects, function(so) { return so.name; });\n      types.forEach(this.sobject, this);\n    }\n  }, this));\n};\n\n/**\n * @private\n */\nTooling.prototype._baseUrl = function() {\n  return this._conn._baseUrl() + \"/tooling\";\n};\n\n/**\n * @private\n */\nTooling.prototype._supports = function(feature) {\n  // should return false in order not to use compsite collection\n  if (feature === 'sobject-collection') {\n    return false;\n  }\n  return this._conn._supports.apply(this._conn, arguments);\n};\n\n/**\n * @private\n */\nTooling.prototype.request = function() {\n  return this._conn.request.apply(this._conn, arguments);\n};\n\n/**\n * Execute query by using SOQL\n *\n * @param {String} soql - SOQL string\n * @param {Callback.<QueryResult>} [callback] - Callback function\n * @returns {Query.<QueryResult>}\n */\n/**\n * Query next record set by using query locator\n *\n * @method Tooling#query\n * @param {String} locator - Next record set locator\n * @param {Callback.<QueryResult>} [callback] - Callback function\n * @returns {Query.<QueryResult>}\n */\n/**\n * Retrieve specified records\n *\n * @method Tooling#queryMore\n * @param {String} type - SObject Type\n * @param {String|Array.<String>} ids - A record ID or array of record IDs\n * @param {Callback.<Record|Array.<Record>>} [callback] - Callback function\n * @returns {Promise.<Record|Array.<Record>>}\n */\n\n/**\n * Synonym of Tooling#create()\n *\n * @method Tooling#insert\n * @param {String} type - SObject Type\n * @param {Object|Array.<Object>} records - A record or array of records to create\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\n */\n/**\n * Create records\n *\n * @method Tooling#create\n * @param {String} type - SObject Type\n * @param {Record|Array.<Record>} records - A record or array of records to create\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\n */\n\n/**\n * Update records\n *\n * @method Tooling#update\n * @param {String} type - SObject Type\n * @param {Record|Array.<Record>} records - A record or array of records to update\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\n */\n\n/**\n * Upsert records\n *\n * @method Tooling#upsert\n * @param {String} type - SObject Type\n * @param {Record|Array.<Record>} records - Record or array of records to upsert\n * @param {String} extIdField - External ID field name\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\n */\n\n/**\n * Synonym of Tooling#destroy()\n *\n * @method Tooling#delete\n * @param {String} type - SObject Type\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\n */\n/**\n * Synonym of Tooling#destroy()\n *\n * @method Tooling#del\n * @param {String} type - SObject Type\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\n */\n/**\n * Delete records\n *\n * @method Tooling#destroy\n * @param {String} type - SObject Type\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\n */\n\n/**\n * Synonym of Tooling#describe()\n *\n * @method Tooling#describeSObject\n * @param {String} type - SObject Type\n * @param {Callback.<DescribeSObjectResult>} [callback] - Callback function\n * @returns {Promise.<DescribeSObjectResult>}\n */\n/**\n * Describe SObject metadata\n *\n * @method Tooling#describe\n * @param {String} type - SObject Type\n * @param {Callback.<DescribeSObjectResult>} [callback] - Callback function\n * @returns {Promise.<DescribeSObjectResult>}\n */\n\n/**\n * Describe global SObjects\n *\n * @method Tooling#describeGlobal\n * @param {Callback.<DescribeGlobalResult>} [callback] - Callback function\n * @returns {Promise.<DescribeGlobalResult>}\n */\n\n/**\n * Get SObject instance\n *\n * @method Tooling#sobject\n * @param {String} type - SObject Type\n * @returns {SObject}\n */\n\n/**\n * @typedef {Object} Tooling~ExecuteAnonymousResult\n * @prop {Boolean} compiled - Flag if the query is compiled successfully\n * @prop {String} compileProblem - Error reason in compilation\n * @prop {Boolean} success - Flag if the code is executed successfully\n * @prop {Number} line - Line number for the error\n * @prop {Number} column - Column number for the error\n * @prop {String} exceptionMessage - Exception message\n * @prop {String} exceptionStackTrace - Exception stack trace\n */\n/**\n * Executes Apex code anonymously\n *\n * @param {String} body - Anonymous Apex code\n * @param {Callback.<Tooling~ExecuteAnonymousResult>} [callback] - Callback function\n * @returns {Promise.<Tooling~ExecuteAnonymousResult>}\n */\nTooling.prototype.executeAnonymous = function(body, callback) {\n  var url = this._baseUrl() + \"/executeAnonymous?anonymousBody=\" + encodeURIComponent(body);\n  return this.request(url).thenCall(callback);\n};\n\n/**\n * Executes Apex tests asynchronously\n *\n * @param {Array.<String>} classids - Comma separated list of class IDs\n * @param {Callback.<Tooling~ExecuteAnonymousResult>} [callback] - Callback function\n * @returns {Promise.<Tooling~ExecuteAnonymousResult>}\n */\nTooling.prototype.runTestsAsynchronous = function(classids, callback) {\n  var url = this._baseUrl() + \"/runTestsAsynchronous/\";\n  return this._conn.requestPost(url, {classids : classids.join(',')}, undefined, callback);\n};\n\n/**\n * Executes Apex tests synchronously\n *\n * @param {Array.<String>} classnames - Comma separated list of class Names\n * @param {Callback.<Tooling~ExecuteAnonymousResult>} [callback] - Callback function\n * @returns {Promise.<Tooling~ExecuteAnonymousResult>}\n */\nTooling.prototype.runTestsSynchronous = function(classnames, callback) {\n  var url = this._baseUrl() + \"/runTestsSynchronous/\";\n  return this._conn.requestPost(url, {classnames : classnames.join(',')}, undefined, callback);\n};\n\n/**\n * @typedef {Object} Tooling~CompletionsResult\n * @prop {Object} publicDeclarations\n */\n/**\n * Retrieves available code completions of the referenced type\n *\n * @param {String} [type] - completion type (default 'apex')\n * @param {Callback.<Tooling~CompletionsResult>} [callback] - Callback function\n * @returns {Promise.<Tooling~CompletionsResult>}\n */\nTooling.prototype.completions = function(type, callback) {\n  if (!_.isString(type)) {\n    callback = type;\n    type = 'apex';\n  }\n  var url = this._baseUrl() + \"/completions?type=\" + encodeURIComponent(type);\n  return this.request(url).thenCall(callback);\n};\n\n\n/*--------------------------------------------*/\n/*\n * Register hook in connection instantiation for dynamically adding this API module features\n */\njsforce.on('connection:new', function(conn) {\n  conn.tooling = new Tooling(conn);\n});\n\n\nmodule.exports = Tooling;\n","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var t;(t=(t=(t=(t=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).jsforce||(t.jsforce={})).modules||(t.modules={})).api||(t.api={})).Tooling=e()}}((function(){return function e(t,o,r){function n(i,c){if(!o[i]){if(!t[i]){var a=\"function\"==typeof require&&require;if(!c&&a)return a(i,!0);if(s)return s(i,!0);var u=new Error(\"Cannot find module '\"+i+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var l=o[i]={exports:{}};t[i][0].call(l.exports,(function(e){return n(t[i][1][e]||e)}),l,l.exports,e,t,o,r)}return o[i].exports}for(var s=\"function\"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,o){\"use strict\";var r=window.jsforce.require(\"./core\"),n=window.jsforce.require(\"lodash/core\"),s=window.jsforce.require(\"./cache\"),i=function(e){this._conn=e,this._logger=e._logger;[\"query\",\"queryMore\",\"_toRecordResult\",\"create\",\"_createSingle\",\"_createParallel\",\"_createMany\",\"insert\",\"retrieve\",\"_retrieveSingle\",\"_retrieveParallel\",\"_retrieveMany\",\"update\",\"_updateSingle\",\"_updateParallel\",\"_updateMany\",\"upsert\",\"del\",\"delete\",\"destroy\",\"_destroySingle\",\"_destroyParallel\",\"_destroyMany\",\"describe\",\"describeGlobal\",\"sobject\"].forEach((function(t){this[t]=e.constructor.prototype[t]}),this),this.cache=new s;var t={key:function(e){return e?\"describe.\"+e:\"describe\"}};this.describe$=this.cache.makeCacheable(this.describe,this,t),this.describe=this.cache.makeResponseCacheable(this.describe,this,t),this.describeSObject$=this.describe$,this.describeSObject=this.describe,t={key:\"describeGlobal\"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,t),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,t),this.initialize()};i.prototype.initialize=function(){this.sobjects={},this.cache.clear(),this.cache.get(\"describeGlobal\").removeAllListeners(\"value\"),this.cache.get(\"describeGlobal\").on(\"value\",n.bind((function(e){e.result&&n.map(e.result.sobjects,(function(e){return e.name})).forEach(this.sobject,this)}),this))},i.prototype._baseUrl=function(){return this._conn._baseUrl()+\"/tooling\"},i.prototype._supports=function(e){return\"sobject-collection\"!==e&&this._conn._supports.apply(this._conn,arguments)},i.prototype.request=function(){return this._conn.request.apply(this._conn,arguments)},i.prototype.executeAnonymous=function(e,t){var o=this._baseUrl()+\"/executeAnonymous?anonymousBody=\"+encodeURIComponent(e);return this.request(o).thenCall(t)},i.prototype.runTestsAsynchronous=function(e,t){var o=this._baseUrl()+\"/runTestsAsynchronous/\";return this._conn.requestPost(o,{classids:e.join(\",\")},void 0,t)},i.prototype.runTestsSynchronous=function(e,t){var o=this._baseUrl()+\"/runTestsSynchronous/\";return this._conn.requestPost(o,{classnames:e.join(\",\")},void 0,t)},i.prototype.completions=function(e,t){n.isString(e)||(t=e,e=\"apex\");var o=this._baseUrl()+\"/completions?type=\"+encodeURIComponent(e);return this.request(o).thenCall(t)},r.on(\"connection:new\",(function(e){e.tooling=new i(e)})),t.exports=i},{}]},{},[1])(1)}));\n//# sourceMappingURL=jsforce-api-tooling.min.js.map\n"]}